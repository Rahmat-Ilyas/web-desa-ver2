import{w as K,a as U,u as q,x as H,o as n,e as m,b as h,f as e,d as o,h as $,g as y,t as i,c as r,i as c,F as j,r as D,T,j as b,l as A,m as v,p as E,v as R,q as G}from"./app-0p5SMVqG.js";import{_ as I}from"./AdminLayout-CtzPpH9t.js";/* empty css            */const L={class:"max-w-[1200px] mx-auto px-4 sm:px-6"},O={class:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4"},J={class:"inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-blue-50 text-blue-600 text-[10px] font-black uppercase tracking-widest mb-3 border border-blue-100 shadow-sm"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},X={class:"relative z-10 flex flex-col items-center text-center"},Y={class:"w-24 h-24 rounded-full border-4 border-white shadow-lg mb-4 bg-white overflow-hidden relative group-hover:scale-105 transition-transform"},Z=["src"],ee={key:1,class:"w-full h-full flex items-center justify-center bg-slate-50 text-slate-300"},te={class:"flex items-center gap-2 mb-2"},se={class:"px-3 py-1 rounded-full bg-blue-50 text-blue-600 text-[10px] font-black uppercase tracking-widest"},ae={class:"px-3 py-1 rounded-full bg-slate-100 text-slate-600 text-[10px] font-black uppercase tracking-widest"},le={class:"text-lg font-black text-slate-900 mb-1 leading-tight"},oe={class:"w-full pt-4 border-t border-slate-50 flex items-center justify-between text-sm"},ne=["href"],re={key:1,class:"text-slate-300 italic text-xs"},ie={class:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-20"},de=["onClick"],ue=["onClick"],ce={key:0,class:"col-span-full py-20 text-center border-2 border-dashed border-slate-200 rounded-[3rem] bg-slate-50/50"},pe={key:0,class:"fixed inset-0 z-[100] overflow-y-auto"},be={class:"flex min-h-full items-center justify-center p-4"},fe={class:"relative bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg p-8 overflow-hidden"},xe={class:"flex justify-between items-center mb-8"},ge={class:"text-xl font-black text-slate-900"},me={class:"grid grid-cols-2 gap-5"},he=["value"],ve={key:0,class:"text-xs text-rose-500 mt-1 ml-3 font-bold"},we={key:0,class:"text-xs text-rose-500 mt-1 ml-3 font-bold"},ke={class:"relative group cursor-pointer"},_e={class:"w-full bg-slate-50 border-2 border-dashed border-slate-200 group-hover:border-blue-400 rounded-2xl p-4 flex items-center justify-center gap-3 transition-colors"},ye={class:"text-xs font-bold text-slate-500 group-hover:text-blue-600 line-clamp-1"},Te={class:"pt-4 flex gap-3"},Re=["disabled"],Ce={key:0,class:"fixed inset-0 z-[110] flex items-center justify-center p-4"},je={key:0,class:"fixed bottom-10 right-10 z-[120] p-4 bg-white border border-emerald-100 rounded-2xl flex items-center gap-3 shadow-2xl"},De={class:"text-slate-500 text-[10px] font-bold"},ze={__name:"Index",props:{members:Array,rws:Array},setup(f){const C=f,d=b({show:!1,message:"",type:"success"}),N=U(),x=(l,t="success")=>{d.value.message=l,d.value.type=t,d.value.show=!0,setTimeout(()=>d.value.show=!1,3e3)};K(()=>N.props.flash?.success,l=>{l&&x(l)});const g=b(!1),u=b(null),w=b(!1),k=b(null),s=q({rukun_warga_id:"",no_rt:"",nama_ketua:"",no_hp:"",foto_ketua:null}),M=()=>{u.value=null,s.reset(),C.rws.length>0&&(s.rukun_warga_id=C.rws[0].id),g.value=!0},B=l=>{u.value=l,s.rukun_warga_id=l.rukun_warga_id,s.no_rt=l.no_rt,s.nama_ketua=l.nama_ketua,s.no_hp=l.no_hp,s.foto_ketua=null,g.value=!0},p=()=>{g.value=!1,s.reset()},z=l=>{l.target.files[0]&&(s.foto_ketua=l.target.files[0])},F=()=>{u.value?s.transform(l=>({...l,_method:"PUT"})).post(route("admin.rukun-tetangga.update",u.value.id),{onSuccess:()=>{p(),x("Data RT berhasil diperbarui")},forceFormData:!0}):s.post(route("admin.rukun-tetangga.store"),{onSuccess:()=>{p(),x("Data RT berhasil ditambahkan")},forceFormData:!0})},P=l=>{k.value=l,w.value=!0},_=()=>{w.value=!1},S=()=>{k.value&&G.delete(route("admin.rukun-tetangga.destroy",k.value.id),{onSuccess:()=>{_(),x("Data RT berhasil dihapus")}})},V=l=>{if(!l)return"";let t=l.toString().replace(/\D/g,"");return t.startsWith("0")?"62"+t.slice(1):t.startsWith("62")?t:"62"+t};return(l,t)=>(n(),H(I,null,{default:m(()=>[h(o($),{title:"Manajemen RT"}),e("div",L,[e("div",O,[e("div",null,[e("span",J,[t[4]||(t[4]=e("i",{class:"fas fa-sitemap"},null,-1)),y(" Lembaga "+i(l.$page.props.settings?.sebutan_wilayah||"Kelurahan"),1)]),t[5]||(t[5]=e("h1",{class:"text-3xl font-black text-slate-900 tracking-tight leading-none mb-2"},"Rukun Tetangga (RT) ",-1)),t[6]||(t[6]=e("p",{class:"text-slate-500 font-bold text-sm"},"Kelola data ketua dan pengurus RT.",-1))]),e("button",{onClick:M,class:"px-6 py-3 rounded-xl bg-blue-600 text-white font-black text-xs uppercase tracking-widest hover:bg-blue-700 transition-all flex items-center gap-2 shadow-lg shadow-blue-600/20"},[...t[7]||(t[7]=[e("i",{class:"fas fa-plus"},null,-1),y(" Tambah RT ",-1)])])]),e("div",Q,[(n(!0),r(j,null,D(f.members,a=>(n(),r("div",{key:a.id,class:"bg-white rounded-[2rem] border border-slate-100 p-6 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden"},[t[13]||(t[13]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-bl-[4rem] -mr-8 -mt-8 z-0"},null,-1)),e("div",X,[e("div",Y,[a.foto_ketua?(n(),r("img",{key:0,src:"/storage/"+a.foto_ketua,class:"w-full h-full object-cover"},null,8,Z)):(n(),r("div",ee,[...t[8]||(t[8]=[e("i",{class:"fas fa-user text-3xl"},null,-1)])]))]),e("div",te,[e("span",se," RT "+i(a.no_rt),1),e("span",ae," RW "+i(a.rukun_warga?.no_rw||"??"),1)]),e("h3",le,i(a.nama_ketua),1),t[10]||(t[10]=e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4"},"Ketua RT",-1)),e("div",oe,[a.no_hp?(n(),r("a",{key:0,href:"https://wa.me/"+V(a.no_hp),target:"_blank",class:"text-slate-500 font-bold hover:text-green-500 transition-colors flex items-center gap-2"},[t[9]||(t[9]=e("i",{class:"fab fa-whatsapp text-lg text-green-500"},null,-1)),y(" "+i(a.no_hp),1)],8,ne)):(n(),r("span",re,"No HP Kosong"))])]),e("div",ie,[e("button",{onClick:W=>B(a),class:"w-8 h-8 rounded-lg bg-white text-blue-500 hover:bg-blue-500 hover:text-white shadow-sm flex items-center justify-center transition-all"},[...t[11]||(t[11]=[e("i",{class:"fas fa-pen text-xs"},null,-1)])],8,de),e("button",{onClick:W=>P(a),class:"w-8 h-8 rounded-lg bg-white text-rose-500 hover:bg-rose-500 hover:text-white shadow-sm flex items-center justify-center transition-all"},[...t[12]||(t[12]=[e("i",{class:"fas fa-trash text-xs"},null,-1)])],8,ue)])]))),128)),f.members.length===0?(n(),r("div",ce,[...t[14]||(t[14]=[e("div",{class:"w-20 h-20 mx-auto bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4"},[e("i",{class:"fas fa-users-slash text-3xl"})],-1),e("p",{class:"text-slate-500 font-bold"},"Belum ada data RT.",-1)])])):c("",!0)])]),h(T,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:m(()=>[g.value?(n(),r("div",pe,[e("div",{class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:p}),e("div",be,[e("div",fe,[e("div",xe,[e("h2",ge,i(u.value?"Edit Data RT":"Tambah RT Baru"),1),e("button",{onClick:p,class:"p-2 hover:bg-slate-100 rounded-xl transition-colors text-slate-400"},[...t[15]||(t[15]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("form",{onSubmit:A(F,["prevent"]),class:"space-y-5"},[e("div",me,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-3"},"Pilih RW",-1)),v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).rukun_warga_id=a),class:"w-full bg-slate-50 border-2 border-transparent focus:border-blue-500 focus:bg-white px-5 py-3 rounded-2xl font-bold text-slate-700 transition-all outline-none appearance-none",required:""},[t[16]||(t[16]=e("option",{value:"",disabled:""},"Pilih RW",-1)),(n(!0),r(j,null,D(f.rws,a=>(n(),r("option",{key:a.id,value:a.id},"RW "+i(a.no_rw)+" - "+i(a.nama_ketua),9,he))),128))],512),[[E,o(s).rukun_warga_id]]),o(s).errors.rukun_warga_id?(n(),r("p",ve,i(o(s).errors.rukun_warga_id),1)):c("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-3"},"Nomor RT",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).no_rt=a),type:"text",class:"w-full bg-slate-50 border-2 border-transparent focus:border-blue-500 focus:bg-white px-5 py-3 rounded-2xl font-bold text-slate-700 transition-all outline-none text-center",placeholder:"01",required:""},null,512),[[R,o(s).no_rt]]),o(s).errors.no_rt?(n(),r("p",we,i(o(s).errors.no_rt),1)):c("",!0)])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-3"},"Nama Ketua RT",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o(s).nama_ketua=a),type:"text",class:"w-full bg-slate-50 border-2 border-transparent focus:border-blue-500 focus:bg-white px-5 py-3 rounded-2xl font-bold text-slate-700 transition-all outline-none",placeholder:"Nama Lengkap",required:""},null,512),[[R,o(s).nama_ketua]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-3"},"No. HP / WA",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).no_hp=a),type:"text",class:"w-full bg-slate-50 border-2 border-transparent focus:border-blue-500 focus:bg-white px-5 py-3 rounded-2xl font-bold text-slate-700 transition-all outline-none",placeholder:"08..."},null,512),[[R,o(s).no_hp]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-3"},"Foto Ketua (Opsional)",-1)),e("div",ke,[e("input",{type:"file",onChange:z,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",accept:"image/*"},null,32),e("div",_e,[t[21]||(t[21]=e("i",{class:"fas fa-camera text-slate-400 group-hover:text-blue-500"},null,-1)),e("span",ye,i(o(s).foto_ketua?o(s).foto_ketua.name||"Ganti foto terpilih":"Upload Foto JPG/PNG"),1)])])]),e("div",Te,[e("button",{type:"button",onClick:p,class:"flex-1 py-3 bg-slate-100 text-slate-600 font-black text-xs uppercase tracking-widest rounded-xl hover:bg-slate-200 transition-all"},"Batal"),e("button",{type:"submit",disabled:o(s).processing,class:"flex-[2] py-3 bg-blue-600 text-white font-black text-xs uppercase tracking-widest rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-600/20 disabled:opacity-50"},i(u.value?"Simpan":"Tambah"),9,Re)])],32)])])])):c("",!0)]),_:1}),h(T,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:m(()=>[w.value?(n(),r("div",Ce,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:_}),e("div",{class:"bg-white rounded-[2.5rem] w-full max-sm p-8 shadow-2xl relative z-10 text-center"},[t[23]||(t[23]=e("div",{class:"w-16 h-16 bg-rose-50 rounded-full flex items-center justify-center mx-auto mb-4 text-rose-500"},[e("i",{class:"fas fa-trash-alt text-2xl"})],-1)),t[24]||(t[24]=e("h3",{class:"text-lg font-black text-slate-900 mb-2"},"Hapus Data RT?",-1)),t[25]||(t[25]=e("p",{class:"text-slate-500 font-medium text-xs mb-6"},"Data yang dihapus tidak dapat dikembalikan.",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:_,class:"flex-1 py-3 bg-slate-100 rounded-xl font-bold text-xs text-slate-600 uppercase tracking-widest hover:bg-slate-200"},"Batal"),e("button",{onClick:S,class:"flex-1 py-3 bg-rose-600 rounded-xl font-bold text-xs text-white uppercase tracking-widest hover:bg-rose-700 shadow-lg shadow-rose-500/30"},"Hapus")])])])):c("",!0)]),_:1}),h(T,{"enter-active-class":"transform transition duration-500 ease-out","enter-from-class":"translate-y-10 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"translate-y-10 opacity-0"},{default:m(()=>[d.value.show?(n(),r("div",je,[t[27]||(t[27]=e("div",{class:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-white shadow-md shadow-emerald-500/20"},[e("i",{class:"fas fa-check text-xs"})],-1)),e("div",null,[t[26]||(t[26]=e("p",{class:"text-slate-900 font-black text-xs"},"Berhasil!",-1)),e("p",De,i(d.value.message),1)])])):c("",!0)]),_:1})]),_:1}))}};export{ze as default};
