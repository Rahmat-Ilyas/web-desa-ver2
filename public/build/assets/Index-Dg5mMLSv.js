import{w as I,a as P,s as B,x as D,o,e as m,b as k,f as e,d as z,h as H,g as u,T as L,c as r,i,j as w,t as n,F as x,r as y,n as _,q as S}from"./app-BVa_JgRi.js";import{_ as N}from"./AdminLayout-D0lfD2ZN.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const M={class:"max-w-[1200px] mx-auto px-4 sm:px-6"},V={key:0,class:"fixed bottom-10 right-10 z-[70] p-5 bg-white border border-emerald-100 rounded-3xl flex items-center gap-4 shadow-2xl"},q={class:"text-slate-500 text-xs font-bold"},R={class:"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden"},F={class:"overflow-x-auto"},U={class:"w-full text-left border-collapse"},E={class:"divide-y divide-slate-50"},O={class:"px-8 py-6"},G={class:"px-3 py-1 bg-slate-100 text-slate-700 text-[10px] font-black rounded-lg tracking-tighter border border-slate-200"},J={class:"px-8 py-6"},Q={class:"text-[10px] font-bold text-slate-400 mb-1"},X={class:"font-black text-slate-900 text-sm whitespace-nowrap"},Y={class:"text-[10px] font-bold text-blue-500 tracking-wider"},Z={class:"px-8 py-6"},ee={class:"px-3 py-1 bg-slate-100 text-slate-600 text-[10px] font-black rounded-lg uppercase tracking-tight"},te={class:"px-8 py-6"},se={class:"text-xs font-bold text-slate-500 line-clamp-2 max-w-xs"},ae={class:"px-8 py-6 text-center"},le={class:"px-8 py-6"},oe={class:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-all translate-x-2 group-hover:translate-x-0"},re=["href"],ne=["onClick"],ie=["onClick"],de={key:0},ce={key:0,class:"px-8 py-6 border-t border-slate-50 flex justify-center bg-slate-50/30"},ue={class:"flex gap-1"},pe=["innerHTML"],xe={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},be={class:"bg-white rounded-[3rem] w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl relative z-10 overflow-hidden"},fe={class:"p-8 md:p-10 pb-6 border-b border-slate-50 bg-white relative z-20"},ge={class:"flex items-center justify-between"},he={class:"flex-grow overflow-y-auto p-8 md:p-10 custom-scrollbar"},ve={class:"space-y-10"},me={class:"grid grid-cols-2 gap-8 border-b border-slate-50 pb-8"},ke={class:"font-black text-rose-600 bg-rose-50 px-4 py-2 rounded-2xl text-xl inline-block tracking-tighter border border-rose-100 italic shadow-sm shadow-rose-500/5"},we={class:"font-black text-slate-700 text-sm bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100 inline-block"},ye={class:"grid grid-cols-1 gap-8 border-b border-slate-50 pb-8"},_e={class:"flex items-center gap-4 bg-slate-50 p-4 rounded-[2rem] border border-slate-100"},je={class:"font-black text-slate-900 leading-none mb-1"},Ae=["href"],Ce={class:"p-8 bg-slate-50/50 rounded-[2.5rem] border border-slate-100 text-slate-600 font-bold text-sm leading-relaxed italic relative"},$e={class:"relative z-10"},De={key:0},Le={class:"grid grid-cols-3 gap-4"},Se=["href"],Te=["src"],We={class:"p-8 md:p-10 border-t border-slate-100 bg-slate-50/50"},Ie={class:"flex flex-wrap gap-4"},Pe={__name:"Index",props:{pengaduans:Object},setup(p){const b=P(),d=w({show:!1,message:"",type:"success"}),f=w(!1),a=w(null),g=(l,t="success")=>{d.value.message=l,d.value.type=t,d.value.show=!0,setTimeout(()=>d.value.show=!1,3e3)};I(()=>b.props.flash?.success,l=>{l&&g(l)});const T=l=>{a.value=l,f.value=!0},j=()=>{f.value=!1,a.value=null},h=(l,t)=>{S.put(route("admin.pengaduan.update",l),{status:t},{preserveScroll:!0,onSuccess:()=>{g("Status aduan berhasil diperbarui"),a.value&&(a.value.status=t)}})},W=l=>{confirm("Apakah Anda yakin ingin menghapus aduan ini?")&&S.delete(route("admin.pengaduan.destroy",l),{preserveScroll:!0,onSuccess:()=>g("Aduan berhasil dihapus")})},A=l=>{switch(l){case"pending":return"bg-amber-50 text-amber-600 border-amber-100";case"proses":return"bg-blue-50 text-blue-600 border-blue-100";case"selesai":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"ditolak":return"bg-rose-50 text-rose-600 border-rose-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},C=l=>new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),$=l=>{let t=l.phone.replace(/\D/g,"");t.startsWith("0")?t="62"+t.substring(1):t.startsWith("8")&&(t="62"+t);const v=`Halo Bapak/Ibu ${l.nama},
    
Saya admin ${b.props.settings?.sebutan_wilayah||"Kelurahan"} ${b.props.settings?.nama_wilayah||"[Nama Wilayah]"} ingin menindaklanjuti aduan Anda (${l.kode}).
    
Isi Aduan: "${l.pesan}"

Tanggapan Admin: `;return`https://wa.me/${t}?text=${encodeURIComponent(v)}`};return(l,t)=>{const v=B("Link");return o(),D(N,null,{default:m(()=>[k(z(H),{title:"Kelola Pengaduan Warga"}),e("div",M,[t[25]||(t[25]=e("div",{class:"mb-8"},[e("div",{class:"mb-6"},[e("div",{class:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-rose-50 text-rose-600 text-[10px] font-black uppercase tracking-widest mb-3"},[e("i",{class:"fas fa-exclamation-circle"}),u(" Layanan Warga ")]),e("h1",{class:"text-4xl font-black text-slate-900 tracking-tight"},"Pengaduan Warga"),e("p",{class:"text-slate-500 font-bold text-sm mt-2"},"Pantau dan tindak lanjuti laporan serta aspirasi dari masyarakat.")])],-1)),k(L,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:m(()=>[d.value.show?(o(),r("div",V,[t[4]||(t[4]=e("div",{class:"w-12 h-12 bg-emerald-500 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-emerald-500/20"},[e("i",{class:"fas fa-check text-xl"})],-1)),e("div",null,[t[3]||(t[3]=e("p",{class:"text-slate-900 font-black text-sm"},"Berhasil!",-1)),e("p",q,n(d.value.message),1)])])):i("",!0)]),_:1}),e("div",R,[e("div",F,[e("table",U,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-slate-50"},[e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest"}," Kode"),e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest"}," Waktu & Pelapor"),e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest"}," Kategori"),e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest"}," Pesan"),e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center"}," Status"),e("th",{class:"px-8 py-6 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right"}," Aksi")])],-1)),e("tbody",E,[(o(!0),r(x,null,y(p.pengaduans.data,s=>(o(),r("tr",{key:s.id,class:"hover:bg-slate-50/50 transition-colors group"},[e("td",O,[e("span",G,n(s.kode),1)]),e("td",J,[e("p",Q,n(C(s.created_at)),1),e("p",X,n(s.nama),1),e("p",Y,n(s.phone),1)]),e("td",Z,[e("span",ee,n(s.kategori),1)]),e("td",te,[e("p",se,n(s.pesan),1)]),e("td",ae,[e("span",{class:_(["px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border",A(s.status)])},n(s.status),3)]),e("td",le,[e("div",oe,[e("a",{href:$(s),target:"_blank",class:"w-10 h-10 rounded-xl bg-emerald-50 text-emerald-600 hover:bg-emerald-600 hover:text-white transition-all flex items-center justify-center shadow-sm hover:shadow-md hover:shadow-emerald-200",title:"Respon via WhatsApp"},[...t[5]||(t[5]=[e("i",{class:"fab fa-whatsapp text-xs"},null,-1)])],8,re),e("button",{onClick:c=>T(s),class:"w-10 h-10 rounded-xl bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center shadow-sm hover:shadow-md hover:shadow-blue-200",title:"Lihat Detail"},[...t[6]||(t[6]=[e("i",{class:"fas fa-eye text-xs"},null,-1)])],8,ne),e("button",{onClick:c=>W(s.id),class:"w-10 h-10 rounded-xl bg-rose-50 text-rose-600 hover:bg-rose-600 hover:text-white transition-all flex items-center justify-center shadow-sm hover:shadow-md hover:shadow-rose-200",title:"Hapus"},[...t[7]||(t[7]=[e("i",{class:"fas fa-trash text-xs"},null,-1)])],8,ie)])])]))),128)),p.pengaduans.data.length===0?(o(),r("tr",de,[...t[8]||(t[8]=[e("td",{colspan:"5",class:"px-8 py-20 text-center text-slate-400"},[e("div",{class:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4"},[e("i",{class:"fas fa-inbox text-2xl text-slate-200"})]),e("p",{class:"font-bold text-sm"},"Belum ada aduan warga saat ini.")],-1)])])):i("",!0)])])]),p.pengaduans.links.length>3?(o(),r("div",ce,[e("div",ue,[(o(!0),r(x,null,y(p.pengaduans.links,(s,c)=>(o(),r(x,{key:c},[s.url===null?(o(),r("div",{key:0,class:"px-4 py-2 rounded-xl text-slate-300 text-[10px] font-black uppercase tracking-widest cursor-not-allowed",innerHTML:s.label},null,8,pe)):(o(),D(v,{key:1,class:_(["px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",s.active?"bg-rose-600 text-white shadow-lg shadow-rose-600/20":"text-slate-500 hover:bg-rose-50"]),href:s.url,innerHTML:s.label},null,8,["class","href","innerHTML"]))],64))),128))])])):i("",!0)]),k(L,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:m(()=>[f.value?(o(),r("div",xe,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:j}),e("div",be,[e("div",fe,[e("div",ge,[e("div",null,[e("span",{class:_(["px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border mb-2 inline-block",A(a.value.status)])},n(a.value.status),3),t[10]||(t[10]=e("h3",{class:"text-2xl font-black text-slate-900"},"Detail Aduan",-1))]),e("button",{onClick:j,class:"w-12 h-12 rounded-full bg-slate-50 text-slate-400 hover:bg-rose-50 hover:text-rose-500 flex items-center justify-center transition-all shadow-sm"},[...t[11]||(t[11]=[e("i",{class:"fas fa-times text-lg"},null,-1)])])])]),e("div",he,[e("div",ve,[e("div",me,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3"}," Kode Aduan ",-1)),e("p",ke,n(a.value.kode),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3"}," Waktu Laporan",-1)),e("p",we,n(C(a.value.created_at)),1)])]),e("div",ye,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3"}," Identitas Pelapor",-1)),e("div",_e,[t[15]||(t[15]=e("div",{class:"w-12 h-12 rounded-2xl bg-white flex items-center justify-center text-blue-500 shadow-sm border border-slate-100 flex-shrink-0"},[e("i",{class:"fas fa-user-circle text-2xl"})],-1)),e("div",null,[e("p",je,n(a.value.nama),1),e("a",{href:$(a.value),target:"_blank",class:"text-xs font-bold text-blue-500 hover:text-blue-600 flex items-center gap-1 transition-colors"},[t[14]||(t[14]=e("i",{class:"fab fa-whatsapp text-sm"},null,-1)),u(" "+n(a.value.phone),1)],8,Ae)])])])]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4"},"Isi Aduan",-1)),e("div",Ce,[t[17]||(t[17]=e("i",{class:"fas fa-quote-left absolute top-4 left-4 text-slate-100 text-3xl"},null,-1)),e("span",$e,'"'+n(a.value.pesan)+'"',1)])]),a.value.photos&&a.value.photos.length?(o(),r("div",De,[t[20]||(t[20]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4"}," Dokumentasi Lapangan",-1)),e("div",Le,[(o(!0),r(x,null,y(a.value.photos,(s,c)=>(o(),r("a",{key:c,href:"/storage/"+s,target:"_blank",class:"aspect-square rounded-[2rem] overflow-hidden border border-slate-100 shadow-sm hover:ring-8 hover:ring-blue-50 transition-all group relative"},[e("img",{src:"/storage/"+s,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,Te),t[19]||(t[19]=e("div",{class:"absolute inset-0 bg-blue-600/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[e("i",{class:"fas fa-search-plus text-white text-xl"})],-1))],8,Se))),128))])])):i("",!0)])]),e("div",We,[t[24]||(t[24]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-5"}," Tindakan Cepat ",-1)),e("div",Ie,[a.value.status!=="proses"?(o(),r("button",{key:0,onClick:t[0]||(t[0]=s=>h(a.value.id,"proses")),class:"px-6 py-4 rounded-2xl bg-blue-600 text-white font-black text-xs uppercase tracking-widest hover:bg-blue-700 hover:shadow-xl hover:shadow-blue-600/20 transition-all flex items-center gap-2"},[...t[21]||(t[21]=[e("i",{class:"fas fa-spinner"},null,-1),u(" Proses Aduan ",-1)])])):i("",!0),a.value.status!=="selesai"?(o(),r("button",{key:1,onClick:t[1]||(t[1]=s=>h(a.value.id,"selesai")),class:"px-6 py-4 rounded-2xl bg-emerald-600 text-white font-black text-xs uppercase tracking-widest hover:bg-emerald-700 hover:shadow-xl hover:shadow-emerald-600/20 transition-all flex items-center gap-2"},[...t[22]||(t[22]=[e("i",{class:"fas fa-check-circle"},null,-1),u(" Selesaikan ",-1)])])):i("",!0),a.value.status!=="ditolak"?(o(),r("button",{key:2,onClick:t[2]||(t[2]=s=>h(a.value.id,"ditolak")),class:"px-6 py-4 rounded-2xl bg-rose-600 text-white font-black text-xs uppercase tracking-widest hover:bg-rose-700 hover:shadow-xl hover:shadow-rose-600/20 transition-all flex items-center gap-2"},[...t[23]||(t[23]=[e("i",{class:"fas fa-times-circle"},null,-1),u(" Tolak Aduan ",-1)])])):i("",!0)])])])])):i("",!0)]),_:1})])]),_:1})}}},Ke=K(Pe,[["__scopeId","data-v-f11112ab"]]);export{Ke as default};
